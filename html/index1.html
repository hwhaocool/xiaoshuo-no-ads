<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <title>土拨鼠看小说</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="https://unpkg.com/buijs@latest/lib/latest/bui.css">

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.1/jquery.js"></script>
    <style>
        .line{
            height: 2px;
            background-color: black;
        }

        .my-title {
            font-weight: bold;
            color: rebeccapurple;
            font-size: .5rem;
        }

        .my-red {
            color: red;
        }
        .myprompt {
            cursor: auto;
            user-select: text;
        }
    </style>
    <script type="text/javascript">
        function exchange() {
            var addr = $("#address").val();
            var myURL = new URL(addr);
            var hostname = myURL.hostname;
            var path = myURL.pathname;

            if(hostname.endsWith("31xiaoshuo.com") ) {
                update("/31xiaoshuo", path);
            } else if(hostname.endsWith("ibiquge.net")){
                update("/biquge", path);
            } else {
                addr = "/" + addr;

                var newurl = window.location.host +  addr;
                $("#result").text(newurl);
                $("#result").attr("href", addr);
            }

        }

        function update(prefix, path) {
            var newpath = prefix + path;
            var newurl = window.location.host + newpath;
            $("#result").text(newurl);
            $("#result").attr("href",newpath);
        }

        window.onload = function() {
            var text = $("#title2").text();
            var a2 = text.replaceAll("#", window.location.host);
            console.log(a2)
            $("#title2").text(a2);
        }
    </script>
</head>

<body>
    <div class="bui-page">
        <header class="bui-bar">
            <div class="bui-bar-main">土拨鼠看小说</div>
            <div class="bui-bar-right">
            </div>
        </header>
        <main>

            <div class="myprompt">
                <div class="my-title">使用说明</div>
                <div >两种用法</div>
                <div>1. 复制小说网站地址，粘贴进来，点击转换，再点击新的地址即可</div>
                <div id="title2">2. 打开小说网站，在地址栏最前面添加 # 即可</div>
            </div>

            <div class="line"></div>

            <ul class="bui-list">
                <li class="bui-btn bui-box clearactive">
                    <label class="bui-label my-red" for="phonenumber">小说地址</label>
                    <div class="span1">
                        <div class="bui-input user-input">
                            <input id="address" type="text" placeholder="请输入小说地址" />
                        </div>
                    </div>
                </li>
                <li class="bui-btn bui-box clearactive">
                    <label class="bui-label" for="username1">转换后地址</label>
                    <div class="span1">
                        <div class="bui-input user-input">
                            <a href="" id="result" style="color: #3b1bc9;font-size: .4rem;text-decoration:underline">
                                
                            </a>
                        </div>
                    </div>
                </li>

            </ul>

            <div class="bui-interval">
                <div class="bui-btn success" onclick="exchange()"><i class="icon-success"></i>转换</div>
            </div>

            <div class="section-title">下面是网站支持列表</div>
            <ul class="bui-list">

                <li class="bui-btn">
                    <a href="/31xiaoshuo">
                        <h3 class="item-title"><span class="success-reverse">【已支持】</span>31小说网 m.31xiaoshuo.com</h3>
                        <p class="item-text">2022年9月3日</p>
                    </a>
                </li>
                <li class="bui-btn">
                    <a>
                        <h3 class="item-title"><span class="success-reverse">【已支持】</span>笔趣阁 m.ibiquge.net</h3>
                        <p class="item-text">2022年9月4日</p>
                    </a>
                </li>
                <li class="bui-btn">
                    <a>
                        <h3 class="item-title"><span class="warning-reverse">【已支持】【待测试】</span>大部分网站都支持，待测试</h3>
                        <p class="item-text">2022年9月4日</p>
                    </a>
                </li>
            </ul>
        </main>
    </div>
</body>
</html>